<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="mapper.member">

	<resultMap type="memberDTO" id="memResult">	
		<result property="id" column="id" />	
		<result property="pwd" column="pwd" />
		<result property="nickname" column="nickname" />
		<result property="name" column="name" />
		<result property="birthday" column="birthday" />
		<result property="gender" column="gender" />
		<result property="callnum" column="callnum" />
		<result property="email" column="email" />
	</resultMap>
	
	<insert id="insertMember" parameterType="memberDTO">
		<![CDATA[
			INSERT INTO HUGO_USER_INFO (ID, PWD, NAME, NICKNAME, BIRTHDAY, GENDER,CALLNUM, EMAIL)
			VALUES (#{id},#{pwd},#{name},#{nickname},#{birthday},#{gender},#{callnum},#{email})	
		]]>
	</insert>
	
	<select id="duplicatecheck" parameterType="String" resultType="String">
		<![CDATA[
			SELECT decode(COUNT(*),1, 'true', 0, 'false')
			FROM HUGO_USER_INFO 
			WHERE ID = #{id}
		]]>
	</select>
	
	<select id="loginById" parameterType="memberDTO" resultType="memberDTO" >
		<![CDATA[
			SELECT * FROM HUGO_USER_INFO
			WHERE ID = #{id} AND PWD = #{pwd}			
		]]>
	</select>
	
	<select id="searchId" parameterType="memberDTO" resultType="String">
		<![CDATA[
			SELECT ID FROM HUGO_USER_INFO
			WHERE NAME = #{name} AND EMAIL = #{email}			
		]]>
	</select>
	
	<select id="searchPw" parameterType="memberDTO" resultType="int">
		<![CDATA[
			SELECT count(*) FROM HUGO_USER_INFO
			WHERE ID = #{id} AND EMAIL = #{email}			
		]]>
	</select>
	
	<update id="updatePw" parameterType="memberDTO">
		<![CDATA[
			UPDATE HUGO_USER_INFO 
				SET PWD = #{pwd}
				WHERE ID = #{id} AND EMAIL = #{email}			
		]]>
	</update>
</mapper>